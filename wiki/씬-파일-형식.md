# 씬 파일 형식

씬 파일(`.rt`)은 렌더링할 3D 장면을 정의하는 텍스트 파일입니다.

---

## 📝 기본 구조

```rt
# 주석은 '#'로 시작

# 필수 요소 (각 1개씩)
A  <ratio>  <R,G,B>                    # 주변광
C  <x,y,z>  <nx,ny,nz>  <fov>          # 카메라
L  <x,y,z>  <brightness>  <R,G,B>      # 조명

# 선택 요소 (여러 개 가능)
sp  <x,y,z>  <diameter>  <R,G,B>       # 구체
pl  <x,y,z>  <nx,ny,nz>  <R,G,B>       # 평면
cy  <x,y,z>  <nx,ny,nz>  <d>  <h>  <R,G,B>  # 원기둥
```

---

## 🌍 필수 요소

### Ambient (주변광)

```rt
A  0.2  255,255,255
```

- **ratio**: 주변광 강도 (0.0 ~ 1.0)
- **R,G,B**: 주변광 색상 (0-255)

**예제**:
```rt
A  0.2  255,255,255    # 흰색, 20% 강도
A  0.3  100,100,200    # 푸른색, 30% 강도
```

### Camera (카메라)

```rt
C  0,0,20  0,0,-1  70
```

- **x,y,z**: 카메라 위치
- **nx,ny,nz**: 카메라 방향 (정규화 필요)
- **fov**: 시야각 (0 ~ 180도)

**예제**:
```rt
C  0,0,20  0,0,-1  70      # Z축에서 원점을 바라봄
C  10,5,10  -1,0,-1  90    # 대각선 시점
```

### Light (조명)

```rt
L  -10,10,10  0.7  255,255,255
```

- **x,y,z**: 조명 위치
- **brightness**: 밝기 (0.0 ~ 1.0)
- **R,G,B**: 조명 색상 (0-255)

**예제**:
```rt
L  -10,10,10  0.7  255,255,255    # 흰색 조명
L  0,20,0  1.0  255,200,150       # 따뜻한 톤
```

---

## 🎨 객체 요소

### Sphere (구체)

```rt
sp  0,0,0  12.6  255,0,0
```

- **x,y,z**: 구체 중심
- **diameter**: 지름 (> 0)
- **R,G,B**: 색상 (0-255)

**예제**:
```rt
sp  0,0,0  10  255,0,0        # 빨간 구체
sp  5,5,-5  5  0,255,0        # 작은 초록 구체
sp  -3,0,0  15  100,100,255   # 큰 파란 구체
```

### Plane (평면)

```rt
pl  0,-10,0  0,1,0  200,200,200
```

- **x,y,z**: 평면 위의 한 점
- **nx,ny,nz**: 법선 벡터 (정규화 필요)
- **R,G,B**: 색상 (0-255)

**예제**:
```rt
pl  0,-5,0  0,1,0  200,200,200    # 수평 바닥 (Y=−5)
pl  0,0,-20  0,0,1  150,150,150   # 수직 벽 (뒤쪽)
pl  10,0,0  1,0,0  255,200,200    # 수직 벽 (오른쪽)
```

### Cylinder (원기둥)

```rt
cy  0,0,0  0,1,0  5  10  0,255,0
```

- **x,y,z**: 중심 위치 (하단 기준)
- **nx,ny,nz**: 축 방향 (정규화 필요)
- **diameter**: 지름 (> 0)
- **height**: 높이 (> 0)
- **R,G,B**: 색상 (0-255)

**예제**:
```rt
cy  0,0,0  0,1,0  5  10  0,255,0    # 수직 원기둥
cy  5,0,0  1,0,0  3  8  255,0,255   # 수평 원기둥
```

---

## ✅ 형식 규칙

### 1. 공백 및 구분자
- 요소 간 구분: 공백 또는 탭 (여러 개 가능)
- 좌표/색상 구분: 쉼표 `,` (공백 없음)

### 2. 숫자 형식
- **정수**: `255`, `-10`, `0`
- **실수**: `0.5`, `12.6`, `-3.14`

### 3. 주석
- `#`으로 시작하는 줄은 무시됨
- 라인 중간 주석은 지원 안 됨

### 4. 공백 라인
- 빈 줄은 무시됨

### 5. 대소문자
- 식별자는 대소문자 구분
- `A`, `C`, `L`, `sp`, `pl`, `cy`만 유효

---

## 📋 예제 장면

### 최소 장면

```rt
A  0.2  255,255,255
C  0,0,20  0,0,-1  70
L  -10,10,10  0.7  255,255,255
sp  0,0,0  10  255,0,0
```

### 복잡한 장면

```rt
# 조명 설정
A  0.2  255,255,255
C  0,5,25  0,-0.2,-1  70
L  -20,20,15  0.8  255,255,255

# 바닥
pl  0,-5,0  0,1,0  200,200,200

# 구체들
sp  0,0,0  10  255,0,0
sp  -15,0,0  8  0,255,0
sp  15,0,0  8  0,0,255

# 원기둥들
cy  -8,-5,0  0,1,0  3  10  255,255,0
cy  8,-5,0  0,1,0  3  10  0,255,255
```

---

## ⚠️ 일반적인 오류

### 1. 필수 요소 누락
```rt
# 오류: 카메라 없음
A  0.2  255,255,255
L  -10,10,10  0.7  255,255,255
```

### 2. 잘못된 범위
```rt
A  1.5  255,255,255    # 오류: ratio > 1.0
C  0,0,0  0,0,0  70    # 오류: 방향 벡터 (0,0,0)
L  0,0,0  -0.5  255,255,255  # 오류: 음수 brightness
sp  0,0,0  -10  255,0,0      # 오류: 음수 지름
```

### 3. 색상 범위 초과
```rt
sp  0,0,0  10  256,0,0   # 오류: 256 > 255
pl  0,0,0  0,1,0  -10,0,0  # 오류: 음수 색상
```

### 4. 형식 오류
```rt
sp 0, 0, 0 10 255,0,0   # 오류: 좌표에 공백
sp  0,0,0  10  255 0 0   # 오류: 색상에 쉼표 없음
```

---

## 🔗 관련 문서

- [빠른 시작 가이드](빠른-시작-가이드.md)
- [프로그램 개요](프로그램-개요.md)

---

**Last Updated**: 2026-01-06  
**Version**: 2.0.0
